{"openapi":"3.0.0","paths":{"/auth/login":{"post":{"description":"Authenticate user and create a new session. Returns session token and refresh token.","operationId":"AuthController_login","parameters":[{"name":"user-agent","required":true,"in":"header","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Login credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequestDto"}}}},"responses":{"200":{"description":"Successfully authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}},"400":{"description":"Invalid email format or password too short","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"summary":"Login with email and password","tags":["Authentication"]}},"/auth/refresh":{"post":{"description":"Use refresh token to obtain a new session token. Refresh token rotates on use.","operationId":"AuthController_refresh","parameters":[],"requestBody":{"required":true,"description":"Refresh token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshRequestDto"}}}},"responses":{"200":{"description":"New session token generated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshResponseDto"}}}},"400":{"description":"Invalid refresh token format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Refresh token expired or invalid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"summary":"Refresh session token","tags":["Authentication"]}},"/auth/logout":{"post":{"description":"Invalidates the current session token immediately.","operationId":"AuthController_logout","parameters":[],"responses":{"204":{"description":"Session invalidated successfully"},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Logout and invalidate session","tags":["Authentication"]}},"/auth/me":{"get":{"description":"Returns current user information, tenant, membership role, and timesheet policy.","operationId":"AuthController_getCurrentUser","parameters":[],"responses":{"200":{"description":"Current user context retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get current user context","tags":["Authentication"]}},"/health":{"get":{"description":"Check the health status of the API and database connection. This endpoint is public and does not require authentication.","operationId":"HealthController_check","parameters":[],"responses":{"200":{"description":"Health status retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckDto"}}}}},"summary":"Health check","tags":["Health"]}},"/projects":{"get":{"description":"Retrieve a paginated list of projects with optional filtering and sorting.","operationId":"ProjectsController_findAll","parameters":[],"responses":{"200":{"description":"Projects retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectListResponseDto"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"List all projects","tags":["Projects"]},"post":{"description":"Create a new project within a tenant. Requires admin or manager role.","operationId":"ProjectsController_create","parameters":[],"responses":{"201":{"description":"Project created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectResponseDto"}}}},"400":{"description":"Invalid project data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Insufficient permissions. Admin or manager role required.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Create a new project","tags":["Projects"]}},"/projects/{id}":{"get":{"description":"Retrieve a project by its ID.","operationId":"ProjectsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Project retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Project not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get a single project","tags":["Projects"]},"patch":{"description":"Update an existing project by its ID. Requires admin or manager role.","operationId":"ProjectsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Project updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectResponseDto"}}}},"400":{"description":"Invalid update data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Insufficient permissions. Admin or manager role required.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Project not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Update a project","tags":["Projects"]},"delete":{"description":"Delete a project by its ID. This will cascade delete related data. Requires admin role.","operationId":"ProjectsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Project deleted successfully"},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Insufficient permissions. Admin role required.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Project not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Delete a project","tags":["Projects"]}},"/projects/{id}/members":{"get":{"description":"Retrieve all users assigned to a specific project.","operationId":"ProjectsController_getMembers","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Project members retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectMembersResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Project not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"List project members","tags":["Projects"]},"post":{"description":"Assign a user to a project with an optional role. Requires admin or manager role.","operationId":"ProjectsController_addMember","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Member added to project successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectMemberResponseDto"}}}},"400":{"description":"Invalid user ID or member already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Insufficient permissions. Admin or manager role required.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Project not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Add a member to a project","tags":["Projects"]}},"/projects/{id}/members/{userId}":{"delete":{"description":"Remove a user assignment from a project. Requires admin or manager role.","operationId":"ProjectsController_removeMember","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Member removed from project successfully"},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Insufficient permissions. Admin or manager role required.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Project or member not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Remove a member from a project","tags":["Projects"]}},"/projects/{id}/members/bulk":{"post":{"description":"Assign multiple users to a project at once. Requires admin or manager role.","operationId":"ProjectsController_bulkAddMembers","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Bulk operation completed. Returns success and failure details."},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Insufficient permissions. Admin or manager role required.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Project not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Bulk add members to a project","tags":["Projects"]}},"/my/projects":{"get":{"description":"Retrieve all projects that the current user is assigned to.","operationId":"MyProjectsController_getMyProjects","parameters":[],"responses":{"200":{"description":"User projects retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectMembersResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get my projects","tags":["My Projects"]}},"/tasks":{"get":{"description":"Retrieve a paginated list of tasks with optional filtering and sorting.","operationId":"TasksController_findAll","parameters":[],"responses":{"200":{"description":"Tasks retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskListResponseDto"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"List all tasks","tags":["Tasks"]},"post":{"description":"Create a new task within a project. Can optionally specify a parent task for hierarchical tasks.","operationId":"TasksController_create","parameters":[],"responses":{"201":{"description":"Task created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskResponseDto"}}}},"400":{"description":"Invalid task data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Create a new task","tags":["Tasks"]}},"/tasks/{id}":{"get":{"description":"Retrieve a task by its ID.","operationId":"TasksController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Task retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Task not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get a single task","tags":["Tasks"]},"patch":{"description":"Update an existing task by its ID.","operationId":"TasksController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Task updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskResponseDto"}}}},"400":{"description":"Invalid update data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Task not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Update a task","tags":["Tasks"]},"delete":{"description":"Delete a task by its ID. This will cascade delete related data.","operationId":"TasksController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Task deleted successfully"},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Task not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Delete a task","tags":["Tasks"]}},"/time-entries":{"get":{"description":"Retrieve a paginated list of time entries with optional filtering and sorting.","operationId":"TimeEntriesController_findAll","parameters":[],"responses":{"200":{"description":"Time entries retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeEntryListResponseDto"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"List all time entries","tags":["Time Entries"]},"post":{"description":"Create a new time entry for logging work hours.","operationId":"TimeEntriesController_create","parameters":[],"responses":{"201":{"description":"Time entry created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeEntryResponseDto"}}}},"400":{"description":"Invalid time entry data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Create a new time entry","tags":["Time Entries"]}},"/time-entries/{id}":{"get":{"description":"Retrieve a time entry by its ID.","operationId":"TimeEntriesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Time entry retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeEntryResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Time entry not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get a single time entry","tags":["Time Entries"]},"patch":{"description":"Update an existing time entry by its ID.","operationId":"TimeEntriesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Time entry updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeEntryResponseDto"}}}},"400":{"description":"Invalid update data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Time entry not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Update a time entry","tags":["Time Entries"]},"delete":{"description":"Delete a time entry by its ID.","operationId":"TimeEntriesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Time entry deleted successfully"},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Time entry not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Delete a time entry","tags":["Time Entries"]}},"/time-entries/stats/weekly/{userId}/{weekStartDate}":{"get":{"description":"Calculate total hours worked by a user for a specific week, including daily breakdown, week end date, and entry count.","operationId":"TimeEntriesController_getWeeklyHours","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}},{"name":"weekStartDate","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Weekly hours retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeeklyHoursDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get weekly hours for a user with daily breakdown","tags":["Time Entries"]}},"/time-entries/stats/project/{projectId}":{"get":{"description":"Calculate total hours logged to a specific project.","operationId":"TimeEntriesController_getProjectHours","parameters":[{"name":"projectId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Project hours retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectHoursDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get project total hours","tags":["Time Entries"]}},"/time-entries/stats/user-projects/{userId}":{"get":{"description":"Calculate hours distribution across projects for a user with optional date filtering. Defaults to current week if no filters provided.","operationId":"TimeEntriesController_getUserProjectStats","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User project statistics retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProjectStatsDto"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get user project statistics","tags":["Time Entries"]}},"/time-entries/week/{userId}/{weekStartDate}":{"get":{"description":"Retrieve all time entries for a week with aggregations, project/task details, daily totals, and timesheet status.","operationId":"TimeEntriesController_getWeekView","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}},{"name":"weekStartDate","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Week view retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeekViewResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get week view for timesheet grid","tags":["Time Entries"]}},"/time-entries/bulk":{"post":{"description":"Create or update multiple time entries in a single request. Useful for filling entire week or updating multiple days.","operationId":"TimeEntriesController_bulkCreateOrUpdate","parameters":[],"responses":{"200":{"description":"Bulk operation completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkTimeEntryResultDto"}}}},"400":{"description":"Invalid bulk entry data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Bulk create/update time entries","tags":["Time Entries"]}},"/time-entries/copy-week":{"post":{"description":"Copy all time entries from a source week to a target week with optional overwrite.","operationId":"TimeEntriesController_copyWeek","parameters":[],"responses":{"200":{"description":"Week copied successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CopyWeekResponseDto"}}}},"400":{"description":"Invalid copy week data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Copy time entries from one week to another","tags":["Time Entries"]}},"/timesheets/my-current":{"get":{"description":"Retrieve the current week timesheet for the logged-in user, or create a new draft if it does not exist.","operationId":"TimesheetsController_getMyCurrent","parameters":[],"responses":{"200":{"description":"Current week timesheet retrieved or created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get or create current week timesheet","tags":["Timesheets"]}},"/timesheets":{"get":{"description":"Retrieve timesheets with optional filters. Supports team view for managers (?team=true) and date range filtering.","operationId":"TimesheetsController_findAll","parameters":[{"name":"user_id","required":true,"in":"query","schema":{"type":"string"}},{"name":"week_start","required":true,"in":"query","schema":{"type":"string"}},{"name":"status","required":true,"in":"query","schema":{"type":"string"}},{"name":"team","required":true,"in":"query","schema":{"type":"string"}},{"name":"from","required":true,"in":"query","schema":{"type":"string"}},{"name":"to","required":true,"in":"query","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","schema":{"type":"string"}},{"name":"page_size","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Timesheets retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetListResponseDto"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"List timesheets","tags":["Timesheets"]},"post":{"description":"Create a new draft timesheet for a user and week.","operationId":"TimesheetsController_create","parameters":[],"responses":{"201":{"description":"Timesheet created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetResponseDto"}}}},"400":{"description":"Invalid timesheet data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Create a new timesheet","tags":["Timesheets"]}},"/timesheets/{id}":{"get":{"description":"Retrieve a timesheet by its ID, including associated time entries.","operationId":"TimesheetsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Timesheet retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get a single timesheet","tags":["Timesheets"]},"delete":{"description":"Delete a draft timesheet. Only draft timesheets can be deleted.","operationId":"TimesheetsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Timesheet deleted successfully"},"400":{"description":"Timesheet cannot be deleted (not in draft status)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Delete a timesheet","tags":["Timesheets"]}},"/timesheets/{id}/submit":{"post":{"description":"Submit a draft timesheet for manager approval. Changes status from draft to pending.","operationId":"TimesheetsController_submit","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Timesheet submitted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetResponseDto"}}}},"400":{"description":"Timesheet cannot be submitted (invalid status)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Submit a timesheet for approval","tags":["Timesheets"]}},"/timesheets/{id}/approve":{"post":{"description":"Approve a pending timesheet. Requires manager role.","operationId":"TimesheetsController_approve","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Timesheet approved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetResponseDto"}}}},"400":{"description":"Timesheet cannot be approved (invalid status)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Approve a timesheet","tags":["Timesheets"]}},"/timesheets/{id}/reject":{"post":{"description":"Reject a pending timesheet with an optional review note. Requires manager role.","operationId":"TimesheetsController_reject","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Timesheet rejected successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetResponseDto"}}}},"400":{"description":"Timesheet cannot be rejected (invalid status)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Reject a timesheet","tags":["Timesheets"]}},"/timesheets/{id}/validate":{"post":{"description":"Validate a timesheet against tenant policy rules (e.g., max hours per day). Returns errors and warnings.","operationId":"TimesheetsController_validate","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Validation completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetValidationResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Validate timesheet against policy rules","tags":["Timesheets"]}},"/timesheets/{id}/recall":{"post":{"description":"Recall a submitted timesheet back to draft status. Only allowed before the timesheet is reviewed.","operationId":"TimesheetsController_recall","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Timesheet recalled successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecallTimesheetResponseDto"}}}},"400":{"description":"Timesheet cannot be recalled (invalid status or already reviewed)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Recall a submitted timesheet","tags":["Timesheets"]}},"/search/projects":{"get":{"description":"Search projects by name or code within the current tenant.","operationId":"SearchController_searchProjects","parameters":[{"name":"q","required":true,"in":"query","schema":{"type":"string"}},{"name":"limit","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Search results retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchProjectsResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Search projects","tags":["Search"]}},"/search/tasks":{"get":{"description":"Search tasks by name within the current tenant, optionally filtered by project.","operationId":"SearchController_searchTasks","parameters":[{"name":"q","required":true,"in":"query","schema":{"type":"string"}},{"name":"project_id","required":true,"in":"query","schema":{"type":"string"}},{"name":"limit","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Search results retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchTasksResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Search tasks","tags":["Search"]}},"/benefit-types":{"get":{"description":"Retrieve a paginated list of benefit types (PTO, sick leave, etc.) with optional filtering.","operationId":"BenefitTypesController_findAll","parameters":[],"responses":{"200":{"description":"Benefit types retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BenefitTypeListResponseDto"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"List all benefit types","tags":["Benefit Types"]},"post":{"description":"Create a new benefit type (e.g., PTO, sick leave) for a tenant.","operationId":"BenefitTypesController_create","parameters":[],"responses":{"201":{"description":"Benefit type created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BenefitTypeResponseDto"}}}},"400":{"description":"Invalid benefit type data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Create a new benefit type","tags":["Benefit Types"]}},"/benefit-types/{id}":{"get":{"description":"Retrieve a benefit type by its ID.","operationId":"BenefitTypesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Benefit type retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BenefitTypeResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Benefit type not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get a single benefit type","tags":["Benefit Types"]},"patch":{"description":"Update an existing benefit type by its ID.","operationId":"BenefitTypesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Benefit type updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BenefitTypeResponseDto"}}}},"400":{"description":"Invalid update data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Benefit type not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Update a benefit type","tags":["Benefit Types"]},"delete":{"description":"Delete a benefit type by its ID.","operationId":"BenefitTypesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Benefit type deleted successfully"},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Benefit type not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Delete a benefit type","tags":["Benefit Types"]}},"/holidays":{"get":{"description":"Retrieve a paginated list of holidays with optional filtering.","operationId":"HolidaysController_findAll","parameters":[],"responses":{"200":{"description":"Holidays retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HolidayListResponseDto"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"List all holidays","tags":["Holidays"]},"post":{"description":"Create a new holiday for a tenant.","operationId":"HolidaysController_create","parameters":[],"responses":{"201":{"description":"Holiday created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HolidayResponseDto"}}}},"400":{"description":"Invalid holiday data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Create a new holiday","tags":["Holidays"]}},"/holidays/{id}":{"get":{"description":"Retrieve a holiday by its ID.","operationId":"HolidaysController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Holiday retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HolidayResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Holiday not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get a single holiday","tags":["Holidays"]},"patch":{"description":"Update an existing holiday by its ID.","operationId":"HolidaysController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Holiday updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HolidayResponseDto"}}}},"400":{"description":"Invalid update data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Holiday not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Update a holiday","tags":["Holidays"]},"delete":{"description":"Delete a holiday by its ID.","operationId":"HolidaysController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Holiday deleted successfully"},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Holiday not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Delete a holiday","tags":["Holidays"]}},"/timesheet-policies":{"get":{"description":"Retrieve the timesheet policy configuration for the authenticated user's tenant.","operationId":"TimesheetPoliciesController_findOne","parameters":[],"responses":{"200":{"description":"Timesheet policy retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetPolicyResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet policy not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get timesheet policy for current tenant","tags":["Timesheet Policies"]},"post":{"description":"Create a new timesheet policy for the current tenant.","operationId":"TimesheetPoliciesController_create","parameters":[],"responses":{"201":{"description":"Timesheet policy created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetPolicyResponseDto"}}}},"400":{"description":"Invalid timesheet policy data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Create a timesheet policy","tags":["Timesheet Policies"]},"patch":{"description":"Update the timesheet policy configuration for the current tenant.","operationId":"TimesheetPoliciesController_update","parameters":[],"responses":{"200":{"description":"Timesheet policy updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimesheetPolicyResponseDto"}}}},"400":{"description":"Invalid update data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet policy not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Update a timesheet policy","tags":["Timesheet Policies"]},"delete":{"description":"Delete the timesheet policy for the current tenant.","operationId":"TimesheetPoliciesController_remove","parameters":[],"responses":{"204":{"description":"Timesheet policy deleted successfully"},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Timesheet policy not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Delete a timesheet policy","tags":["Timesheet Policies"]}},"/leave-requests":{"get":{"description":"Retrieve leave requests with optional filters. Supports ?mine=true for own requests, ?team=true for team view (managers), and date range filtering.","operationId":"LeaveRequestsController_findAll","parameters":[{"name":"mine","required":true,"in":"query","schema":{"type":"string"}},{"name":"team","required":true,"in":"query","schema":{"type":"string"}},{"name":"status","required":true,"in":"query","schema":{"type":"string"}},{"name":"from","required":true,"in":"query","schema":{"type":"string"}},{"name":"to","required":true,"in":"query","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","schema":{"type":"string"}},{"name":"page_size","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Leave requests retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaveRequestListResponseDto"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"List leave requests","tags":["Leave Requests"]},"post":{"description":"Create a new leave request for PTO, sick leave, or other benefits.","operationId":"LeaveRequestsController_create","parameters":[],"requestBody":{"required":true,"description":"Leave request details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLeaveRequestRequestDto"}}}},"responses":{"201":{"description":"Leave request created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaveRequestResponseDto"}}}},"400":{"description":"Invalid leave request data or insufficient balance","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Create a new leave request","tags":["Leave Requests"]}},"/leave-requests/{id}":{"get":{"description":"Retrieve a leave request by its ID.","operationId":"LeaveRequestsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Leave request retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaveRequestResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Leave request not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get a single leave request","tags":["Leave Requests"]},"delete":{"description":"Cancel own pending leave request.","operationId":"LeaveRequestsController_cancel","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Leave request cancelled successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaveRequestResponseDto"}}}},"400":{"description":"Leave request cannot be cancelled (invalid status or not owned by user)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Leave request not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Cancel a leave request","tags":["Leave Requests"]}},"/leave-requests/{id}/approve":{"post":{"description":"Approve a pending leave request and update user balance. Requires manager role.","operationId":"LeaveRequestsController_approve","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Leave request approved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaveRequestResponseDto"}}}},"400":{"description":"Leave request cannot be approved (invalid status)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Leave request not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Approve a leave request","tags":["Leave Requests"]}},"/leave-requests/{id}/reject":{"post":{"description":"Reject a pending leave request with an optional review note. Requires manager role.","operationId":"LeaveRequestsController_reject","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Leave request rejected successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaveRequestResponseDto"}}}},"400":{"description":"Leave request cannot be rejected (invalid status)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Leave request not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Reject a leave request","tags":["Leave Requests"]}},"/leave-requests/users/{userId}/benefits":{"get":{"description":"Retrieve all benefit balances for a user (PTO, sick leave, etc.).","operationId":"LeaveRequestsController_getUserBenefits","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Benefit balances retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BenefitBalancesResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get user benefit balances","tags":["Leave Requests"]}},"/calendar":{"get":{"description":"Retrieve a unified calendar feed including holidays, leave requests, and timesheets for a user. Query parameters: user_id (optional, defaults to current user), from (required YYYY-MM-DD), to (required YYYY-MM-DD), include (optional comma-separated: holidays,leave,timesheets).","operationId":"CalendarController_getCalendar","parameters":[{"name":"user_id","required":true,"in":"query","schema":{"type":"string"}},{"name":"from","required":true,"in":"query","schema":{"type":"string"}},{"name":"to","required":true,"in":"query","schema":{"type":"string"}},{"name":"include","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Calendar feed retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarResponseDto"}}}},"400":{"description":"Missing required parameters (from and to dates)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get unified calendar feed","tags":["Calendar"]}},"/users":{"get":{"description":"Retrieve a paginated list of users within the tenant. Supports filtering by role, status, manager, and search query. Only accessible by admins and managers.","operationId":"UsersController_findAll","parameters":[{"name":"manager_id","required":false,"in":"query","description":"Filter by manager ID (shows direct reports)","schema":{"example":"123e4567-e89b-12d3-a456-426614174002"}},{"name":"status","required":false,"in":"query","description":"Filter by membership status","schema":{"enum":["active","invited","disabled"],"type":"string"}},{"name":"role","required":false,"in":"query","description":"Filter by role","schema":{"enum":["admin","manager","employee"],"type":"string"}},{"name":"q","required":false,"in":"query","description":"Search by name or email","schema":{"example":"john"}},{"name":"sort","required":false,"in":"query","description":"Sort field and direction (e.g., \"name:asc\", \"created_at:desc\")","schema":{"example":"name:asc"}},{"name":"limit","required":false,"in":"query","description":"Items per page (default: 20, max: 100)","schema":{"example":20}},{"name":"page","required":false,"in":"query","description":"Page number (default: 1)","schema":{"example":1}}],"responses":{"200":{"description":"Users retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponseDto"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Access denied. Only admins and managers can access this endpoint.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"List all users/employees","tags":["Users"]},"post":{"description":"Create a new user or invite an existing user to the tenant. Sets status to \"invited\" and optionally sends an invitation email. Accessible by admins and managers only.","operationId":"UsersController_create","parameters":[],"responses":{"201":{"description":"User created/invited successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"400":{"description":"Invalid user data, validation error, or circular manager reference","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Access denied. Only admins and managers can create users.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"409":{"description":"User is already a member of this tenant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Create or invite a user","tags":["Users"]}},"/users/{id}":{"patch":{"description":"Update user details including name, role, and profile information. Supports partial updates. Users cannot change their own role. Validates circular manager references. Accessible by admins and managers only.","operationId":"UsersController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"400":{"description":"Invalid update data, validation error, or circular manager reference","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Access denied. Cannot change own role.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"User not found in this tenant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Update a user","tags":["Users"]},"delete":{"description":"Soft delete a user by setting their membership status to \"disabled\". Admins can deactivate any user. Managers can only deactivate their direct reports. Users cannot deactivate themselves.","operationId":"UsersController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"User deactivated successfully"},"400":{"description":"Invalid user ID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Access denied. Cannot deactivate own account or non-direct reports.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"User not found in this tenant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Deactivate a user","tags":["Users"]}},"/users/{id}/reactivate":{"put":{"description":"Reactivate a disabled user by setting their membership status back to \"active\". Admins can reactivate any user. Managers can only reactivate their direct reports.","operationId":"UsersController_reactivate","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"User reactivated successfully"},"400":{"description":"User is already active","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Access denied. Managers can only reactivate their direct reports.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"User not found in this tenant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Reactivate a disabled user","tags":["Users"]}},"/organization":{"get":{"description":"Retrieve the current organization profile including name, contact information, branding, and preferences. Only accessible by admin users.","operationId":"OrganizationController_getOrganization","parameters":[],"responses":{"200":{"description":"Organization settings retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Access denied. Only admins can view organization settings.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Organization not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Get organization settings","tags":["Organization"]},"patch":{"description":"Update organization profile information. Supports partial updates - only provided fields will be updated. Logo upload should be handled separately by the frontend (upload to CDN/S3 and provide URL). Only accessible by admin users.","operationId":"OrganizationController_updateOrganization","parameters":[],"requestBody":{"required":true,"description":"Organization fields to update","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOrganizationRequestDto"},"examples":{"full":{"summary":"Update all fields","value":{"name":"Acme Corporation","phone":"+1-555-123-4567","address":"123 Main Street, Suite 100, San Francisco, CA 94105","logoUrl":"https://cdn.example.com/logos/acme-corp.png","timezone":"America/New_York","country":"US"}},"partial":{"summary":"Update only phone and address","value":{"phone":"+1-555-987-6543","address":"456 Oak Avenue, New York, NY 10001"}},"clearFields":{"summary":"Clear optional fields","value":{"phone":null,"address":null,"logoUrl":null,"country":null}}}}}},"responses":{"200":{"description":"Organization settings updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationResponseDto"}}}},"400":{"description":"Invalid organization data or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"401":{"description":"Invalid or expired session token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"403":{"description":"Access denied. Only admins can update organization settings.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}},"404":{"description":"Organization not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDto"}}}}},"security":[{"session":[]}],"summary":"Update organization settings","tags":["Organization"]}}},"info":{"title":"Kairos API","description":"Timesheet and PTO Management System API","version":"1.0.0","contact":{}},"tags":[],"servers":[{"url":"http://localhost:3000/api/v1","description":"Local Development"}],"components":{"securitySchemes":{"session":{"type":"apiKey","in":"header","name":"Authorization","description":"Session token (obtained from /auth/login)"}},"schemas":{"LoginRequestDto":{"type":"object","properties":{"email":{"type":"string","description":"User email address","example":"john.doe@example.com"},"password":{"type":"string","description":"User password (minimum 8 characters)","example":"SecurePassword123!","minLength":8},"tenantId":{"type":"string","description":"Tenant ID (optional - if user belongs to multiple tenants)","example":"123e4567-e89b-12d3-a456-426614174000"}},"required":["email","password"]},"LoginResponseDataDto":{"type":"object","properties":{"sessionToken":{"type":"string","description":"Session token for authenticated requests","example":"987fcdeb-51a2-43f7-b8c3-9abc12345678"},"refreshToken":{"type":"string","description":"Refresh token to obtain new session tokens","example":"abc12345-6789-def0-1234-56789abcdef0"},"userId":{"type":"string","description":"User ID","example":"123e4567-e89b-12d3-a456-426614174001"},"tenantId":{"type":"string","description":"Tenant ID for this session","example":"123e4567-e89b-12d3-a456-426614174000"},"expiresAt":{"type":"string","description":"Session expiration timestamp","example":"2025-11-20T12:00:00.000Z"}},"required":["sessionToken","refreshToken","userId","tenantId","expiresAt"]},"LoginResponseDto":{"type":"object","properties":{"data":{"description":"Login result data","allOf":[{"$ref":"#/components/schemas/LoginResponseDataDto"}]}},"required":["data"]},"ErrorResponseDto":{"type":"object","properties":{"error":{"type":"string","description":"Error type","example":"Bad Request"},"message":{"type":"string","description":"Detailed error message","example":"Validation failed"},"statusCode":{"type":"number","description":"HTTP status code","example":400}},"required":["error","message","statusCode"]},"RefreshRequestDto":{"type":"object","properties":{"refreshToken":{"type":"string","description":"Refresh token","example":"abc12345-6789-def0-1234-56789abcdef0"}},"required":["refreshToken"]},"RefreshResponseDto":{"type":"object","properties":{"data":{"description":"New session tokens","allOf":[{"$ref":"#/components/schemas/LoginResponseDataDto"}]}},"required":["data"]},"UserDto":{"type":"object","properties":{"id":{"type":"string","description":"User ID","example":"123e4567-e89b-12d3-a456-426614174001"},"email":{"type":"string","description":"User email","example":"john.doe@example.com"},"name":{"type":"string","description":"User full name","example":"John Doe"},"locale":{"type":"string","description":"User locale preference","example":"en-US"}},"required":["id","email","name"]},"TenantDto":{"type":"object","properties":{"id":{"type":"string","description":"Tenant ID","example":"123e4567-e89b-12d3-a456-426614174000"}},"required":["id"]},"MembershipDto":{"type":"object","properties":{"role":{"type":"string","description":"User role in the tenant","example":"employee","enum":["admin","manager","employee"]},"status":{"type":"string","description":"Membership status","example":"active","enum":["active","inactive"]}},"required":["role","status"]},"TimesheetPolicyDto":{"type":"object","properties":{"tenantId":{"type":"string","description":"Tenant ID","example":"123e4567-e89b-12d3-a456-426614174000"},"hoursPerWeek":{"type":"number","description":"Standard hours per week","example":40},"weekStartDay":{"type":"number","description":"Week start day (0=Sunday, 1=Monday, etc.)","example":1},"requireApproval":{"type":"boolean","description":"Require approval for timesheets","example":true},"allowEditAfterSubmit":{"type":"boolean","description":"Allow editing after submission","example":false}},"required":["tenantId","hoursPerWeek","weekStartDay","requireApproval","allowEditAfterSubmit"]},"MeResponseDataDto":{"type":"object","properties":{"user":{"description":"Current user information","allOf":[{"$ref":"#/components/schemas/UserDto"}]},"tenant":{"description":"Current tenant information","allOf":[{"$ref":"#/components/schemas/TenantDto"}]},"membership":{"description":"User membership details","allOf":[{"$ref":"#/components/schemas/MembershipDto"}]},"timesheetPolicy":{"description":"Tenant timesheet policy","nullable":true,"allOf":[{"$ref":"#/components/schemas/TimesheetPolicyDto"}]}},"required":["user","tenant","membership","timesheetPolicy"]},"MeResponseDto":{"type":"object","properties":{"data":{"description":"Current user context","allOf":[{"$ref":"#/components/schemas/MeResponseDataDto"}]}},"required":["data"]},"HealthCheckDto":{"type":"object","properties":{"ok":{"type":"boolean","description":"Whether the service is healthy","example":true},"ts":{"type":"string","description":"Current timestamp","example":"2025-01-20T12:00:00.000Z"},"database":{"type":"string","description":"Database connection status","example":"connected","enum":["connected","disconnected"]},"error":{"type":"string","description":"Error message if health check failed","example":"Connection timeout"}},"required":["ok","ts","database"]},"PaginationMetaDto":{"type":"object","properties":{"page":{"type":"number","description":"Current page number","example":1},"limit":{"type":"number","description":"Number of items per page","example":20},"total":{"type":"number","description":"Total number of items","example":42}},"required":["page","limit","total"]},"ProjectListResponseDto":{"type":"object","properties":{"data":{"description":"Array of projects","items":{"type":"array"},"type":"array"},"meta":{"description":"Pagination metadata","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["data","meta"]},"ProjectDto":{"type":"object","properties":{"id":{"type":"string","description":"Project ID","example":"123e4567-e89b-12d3-a456-426614174002"},"tenantId":{"type":"string","description":"Tenant ID","example":"123e4567-e89b-12d3-a456-426614174000"},"name":{"type":"string","description":"Project name","example":"Website Redesign"},"code":{"type":"object","description":"Project code","example":"WEB-2024","nullable":true},"active":{"type":"boolean","description":"Whether the project is active","example":true},"createdAt":{"type":"string","description":"Creation timestamp","example":"2025-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","description":"Last update timestamp","example":"2025-01-20T15:30:00.000Z"}},"required":["id","tenantId","name","code","active"]},"ProjectResponseDto":{"type":"object","properties":{"data":{"description":"Project data","allOf":[{"$ref":"#/components/schemas/ProjectDto"}]}},"required":["data"]},"ProjectMembersResponseDto":{"type":"object","properties":{"data":{"description":"Array of project members","items":{"type":"array"},"type":"array"}},"required":["data"]},"ProjectMemberDto":{"type":"object","properties":{"id":{"type":"string","description":"Project member ID","example":"123e4567-e89b-12d3-a456-426614174003"},"tenantId":{"type":"string","description":"Tenant ID","example":"123e4567-e89b-12d3-a456-426614174000"},"projectId":{"type":"string","description":"Project ID","example":"123e4567-e89b-12d3-a456-426614174002"},"userId":{"type":"string","description":"User ID","example":"123e4567-e89b-12d3-a456-426614174001"},"role":{"type":"object","description":"User role on the project","example":"member","nullable":true},"createdAt":{"type":"string","description":"Timestamp when user was assigned to project","example":"2025-01-15T10:00:00.000Z"}},"required":["id","tenantId","projectId","userId","role","createdAt"]},"ProjectMemberResponseDto":{"type":"object","properties":{"data":{"description":"Project member data","allOf":[{"$ref":"#/components/schemas/ProjectMemberDto"}]}},"required":["data"]},"TaskListResponseDto":{"type":"object","properties":{"data":{"description":"Array of tasks","items":{"type":"array"},"type":"array"},"meta":{"description":"Pagination metadata","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["data","meta"]},"TaskDto":{"type":"object","properties":{"id":{"type":"string","description":"Task ID","example":"123e4567-e89b-12d3-a456-426614174005"},"tenantId":{"type":"string","description":"Tenant ID","example":"123e4567-e89b-12d3-a456-426614174000"},"projectId":{"type":"string","description":"Project ID","example":"123e4567-e89b-12d3-a456-426614174002"},"name":{"type":"string","description":"Task name","example":"Frontend Development"},"parentTaskId":{"type":"object","description":"Parent task ID (for subtasks)","example":"123e4567-e89b-12d3-a456-426614174004","nullable":true},"createdAt":{"type":"string","description":"Creation timestamp","example":"2025-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","description":"Last update timestamp","example":"2025-01-20T15:30:00.000Z"}},"required":["id","tenantId","projectId","name","parentTaskId"]},"TaskResponseDto":{"type":"object","properties":{"data":{"description":"Task data","allOf":[{"$ref":"#/components/schemas/TaskDto"}]}},"required":["data"]},"TimeEntryListResponseDto":{"type":"object","properties":{"data":{"description":"Array of time entries","items":{"type":"array"},"type":"array"},"meta":{"description":"Pagination metadata","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["data","meta"]},"TimeEntryDto":{"type":"object","properties":{"id":{"type":"string","description":"Time entry ID","example":"123e4567-e89b-12d3-a456-426614174010"},"tenantId":{"type":"string","description":"Tenant ID","example":"123e4567-e89b-12d3-a456-426614174000"},"userId":{"type":"string","description":"User ID","example":"123e4567-e89b-12d3-a456-426614174001"},"projectId":{"type":"string","description":"Project ID","example":"123e4567-e89b-12d3-a456-426614174002"},"taskId":{"type":"object","description":"Task ID","example":"123e4567-e89b-12d3-a456-426614174005","nullable":true},"weekStartDate":{"type":"string","description":"Week start date","example":"2025-01-20T00:00:00.000Z"},"dayOfWeek":{"type":"number","description":"Day of week (0=Sunday, 1=Monday, ..., 6=Saturday)","example":1},"hours":{"type":"number","description":"Hours worked","example":8.5},"note":{"type":"object","description":"Note","example":"Worked on feature implementation","nullable":true},"createdAt":{"type":"string","description":"Creation timestamp","example":"2025-01-20T09:00:00.000Z"}},"required":["id","tenantId","userId","projectId","taskId","weekStartDate","dayOfWeek","hours","note","createdAt"]},"TimeEntryResponseDto":{"type":"object","properties":{"data":{"description":"Time entry data","allOf":[{"$ref":"#/components/schemas/TimeEntryDto"}]}},"required":["data"]},"WeeklyHoursDto":{"type":"object","properties":{"userId":{"type":"string","description":"User ID","example":"123e4567-e89b-12d3-a456-426614174001"},"weekStartDate":{"type":"string","description":"Week start date (YYYY-MM-DD)","example":"2025-01-27"},"weekEndDate":{"type":"string","description":"Week end date (YYYY-MM-DD)","example":"2025-02-02"},"totalHours":{"type":"number","description":"Total hours for the week","example":42.5},"hoursPerDay":{"type":"object","description":"Hours per day (date keys in YYYY-MM-DD format)","example":{"2025-01-27":8.5,"2025-01-28":7,"2025-01-29":8,"2025-01-30":8,"2025-01-31":7.5,"2025-02-01":3.5,"2025-02-02":0},"additionalProperties":{"type":"number"}},"entriesCount":{"type":"number","description":"Total number of time entries in the week","example":15}},"required":["userId","weekStartDate","weekEndDate","totalHours","hoursPerDay","entriesCount"]},"ProjectHoursDto":{"type":"object","properties":{"projectId":{"type":"string","description":"Project ID","example":"123e4567-e89b-12d3-a456-426614174002"},"totalHours":{"type":"number","description":"Total hours for the project","example":120.5}},"required":["projectId","totalHours"]},"UserProjectStatsDto":{"type":"object","properties":{"userId":{"type":"string","description":"User ID","example":"user123"},"totalHours":{"type":"number","description":"Total hours across all projects","example":42.5},"projects":{"description":"Project statistics sorted by total hours descending","items":{"type":"array"},"type":"array"}},"required":["userId","totalHours","projects"]},"WeekTimeEntry":{"type":"object","properties":{"id":{"type":"string"},"projectId":{"type":"string"},"projectName":{"type":"string"},"projectCode":{"type":"string"},"taskId":{"type":"object"},"taskName":{"type":"object"},"dayOfWeek":{"type":"number"},"date":{"type":"string"},"hours":{"type":"number"},"note":{"type":"object"}},"required":["id","projectId","projectName","projectCode","dayOfWeek","date","hours"]},"ProjectBreakdownItem":{"type":"object","properties":{"projectId":{"type":"string"},"projectName":{"type":"string"},"projectCode":{"type":"string"},"totalHours":{"type":"number"}},"required":["projectId","projectName","projectCode","totalHours"]},"WeekViewResponseDto":{"type":"object","properties":{"weekStartDate":{"type":"string"},"weekEndDate":{"type":"string"},"userId":{"type":"string"},"entries":{"type":"array","items":{"$ref":"#/components/schemas/WeekTimeEntry"}},"dailyTotals":{"type":"array","items":{"type":"number"}},"weeklyTotal":{"type":"number"},"byProject":{"type":"object"},"projectBreakdown":{"type":"array","items":{"$ref":"#/components/schemas/ProjectBreakdownItem"}},"timesheet":{"type":"object"}},"required":["weekStartDate","weekEndDate","userId","entries","dailyTotals","weeklyTotal","byProject","projectBreakdown"]},"BulkTimeEntryResultDto":{"type":"object","properties":{"created":{"type":"array","items":{"type":"string"}},"updated":{"type":"array","items":{"type":"string"}},"errors":{"type":"array","items":{"type":"string"}},"summary":{"type":"object"}},"required":["created","updated","errors","summary"]},"CopyWeekResponseDto":{"type":"object","properties":{"copiedCount":{"type":"number"},"skippedCount":{"type":"number"},"overwrittenCount":{"type":"number"},"entries":{"type":"array","items":{"type":"string"}},"skipped":{"type":"array","items":{"type":"string"}}},"required":["copiedCount","skippedCount","overwrittenCount","entries","skipped"]},"TimesheetDto":{"type":"object","properties":{"id":{"type":"string","description":"Timesheet ID","example":"123e4567-e89b-12d3-a456-426614174020"},"tenantId":{"type":"string","description":"Tenant ID","example":"123e4567-e89b-12d3-a456-426614174000"},"userId":{"type":"string","description":"User ID","example":"123e4567-e89b-12d3-a456-426614174001"},"weekStartDate":{"type":"string","description":"Week start date","example":"2025-01-20"},"status":{"type":"string","description":"Timesheet status","example":"pending","enum":["draft","pending","approved","rejected"]},"submittedAt":{"type":"object","description":"Submission timestamp","example":"2025-01-25T17:00:00.000Z","nullable":true},"submittedByUserId":{"type":"object","description":"User ID who submitted","example":"123e4567-e89b-12d3-a456-426614174001","nullable":true},"reviewedAt":{"type":"object","description":"Review timestamp","example":"2025-01-26T10:00:00.000Z","nullable":true},"reviewedByUserId":{"type":"object","description":"User ID who reviewed","example":"123e4567-e89b-12d3-a456-426614174050","nullable":true},"reviewNote":{"type":"object","description":"Review note","example":"Approved for payment","nullable":true},"createdAt":{"type":"string","description":"Creation timestamp","example":"2025-01-20T09:00:00.000Z"},"updatedAt":{"type":"string","description":"Last update timestamp","example":"2025-01-26T10:00:00.000Z"},"timeEntries":{"description":"Time entries in this timesheet","type":"array","items":{"type":"string"}}},"required":["id","tenantId","userId","weekStartDate","status","submittedAt","submittedByUserId","reviewedAt","reviewedByUserId","reviewNote","createdAt","updatedAt"]},"TimesheetResponseDto":{"type":"object","properties":{"data":{"description":"Timesheet data","allOf":[{"$ref":"#/components/schemas/TimesheetDto"}]}},"required":["data"]},"TimesheetListResponseDto":{"type":"object","properties":{"data":{"description":"Array of timesheets","items":{"type":"array"},"type":"array"},"page":{"type":"number","description":"Current page number","example":1},"pageSize":{"type":"number","description":"Page size","example":20},"total":{"type":"number","description":"Total number of timesheets","example":42}},"required":["data","page","pageSize","total"]},"ValidationError":{"type":"object","properties":{"type":{"type":"string"},"severity":{"type":"string"},"message":{"type":"string"},"dayOfWeek":{"type":"number"},"date":{"type":"string"},"hours":{"type":"number"},"maxAllowed":{"type":"number"}},"required":["type","severity","message"]},"ValidationSummary":{"type":"object","properties":{"totalHours":{"type":"number"},"daysWithEntries":{"type":"number"},"entryCount":{"type":"number"},"projectCount":{"type":"number"},"status":{"type":"string"}},"required":["totalHours","daysWithEntries","entryCount","projectCount","status"]},"TimesheetValidationResponseDto":{"type":"object","properties":{"valid":{"type":"boolean"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ValidationError"}},"warnings":{"type":"array","items":{"$ref":"#/components/schemas/ValidationError"}},"summary":{"$ref":"#/components/schemas/ValidationSummary"}},"required":["valid","errors","warnings","summary"]},"RecallTimesheetResponseDto":{"type":"object","properties":{"id":{"type":"string"},"status":{"type":"string"},"previousStatus":{"type":"string"},"recalledAt":{"format":"date-time","type":"string"},"recalledByUserId":{"type":"string"}},"required":["id","status","previousStatus","recalledAt","recalledByUserId"]},"SearchMetaDto":{"type":"object","properties":{"query":{"type":"string","description":"Search query","example":"website"},"count":{"type":"number","description":"Number of results","example":5},"projectId":{"type":"string","description":"Project ID filter (for task search)","example":"123e4567-e89b-12d3-a456-426614174002"}},"required":["query","count"]},"SearchProjectsResponseDto":{"type":"object","properties":{"data":{"description":"Array of matching projects","items":{"type":"array"},"type":"array"},"meta":{"description":"Search metadata","allOf":[{"$ref":"#/components/schemas/SearchMetaDto"}]}},"required":["data","meta"]},"SearchTasksResponseDto":{"type":"object","properties":{"data":{"description":"Array of matching tasks","items":{"type":"array"},"type":"array"},"meta":{"description":"Search metadata","allOf":[{"$ref":"#/components/schemas/SearchMetaDto"}]}},"required":["data","meta"]},"BenefitTypeListResponseDto":{"type":"object","properties":{"data":{"description":"Array of benefit types","items":{"type":"array"},"type":"array"},"meta":{"description":"Pagination metadata","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["data","meta"]},"BenefitTypeDto":{"type":"object","properties":{"id":{"type":"string","description":"Benefit type ID","example":"123e4567-e89b-12d3-a456-426614174030"},"tenantId":{"type":"string","description":"Tenant ID","example":"123e4567-e89b-12d3-a456-426614174000"},"key":{"type":"string","description":"Benefit type key","example":"pto"},"name":{"type":"string","description":"Benefit type name","example":"Paid Time Off"},"unit":{"type":"string","description":"Unit of measurement","example":"days","enum":["days","hours"]},"requiresApproval":{"type":"boolean","description":"Whether approval is required","example":true},"allowNegativeBalance":{"type":"boolean","description":"Whether negative balance is allowed (e.g., unpaid leave)","example":false},"createdAt":{"type":"string","description":"Creation timestamp","example":"2025-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","description":"Last update timestamp","example":"2025-01-20T15:30:00.000Z"}},"required":["id","tenantId","key","name","unit","requiresApproval","allowNegativeBalance"]},"BenefitTypeResponseDto":{"type":"object","properties":{"data":{"description":"Benefit type data","allOf":[{"$ref":"#/components/schemas/BenefitTypeDto"}]}},"required":["data"]},"HolidayListResponseDto":{"type":"object","properties":{"data":{"description":"Array of holidays","items":{"type":"array"},"type":"array"},"meta":{"description":"Pagination metadata","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["data","meta"]},"HolidayDto":{"type":"object","properties":{"id":{"type":"string","description":"Holiday ID","example":"123e4567-e89b-12d3-a456-426614174060"},"tenantId":{"type":"object","description":"Tenant ID (null for global holidays)","example":"123e4567-e89b-12d3-a456-426614174000","nullable":true},"countryCode":{"type":"string","description":"Country code (2-letter ISO)","example":"US"},"name":{"type":"string","description":"Holiday name","example":"New Year's Day"},"date":{"type":"string","description":"Holiday date (YYYY-MM-DD)","example":"2025-01-01"},"type":{"type":"string","description":"Holiday type","example":"public","enum":["public","company","regional"]},"isRecurring":{"type":"boolean","description":"Whether this is a recurring annual holiday","example":true},"description":{"type":"object","description":"Optional description","example":"Public holiday celebrated nationwide","nullable":true}},"required":["id","tenantId","countryCode","name","date","type","isRecurring","description"]},"HolidayResponseDto":{"type":"object","properties":{"data":{"description":"Holiday data","allOf":[{"$ref":"#/components/schemas/HolidayDto"}]}},"required":["data"]},"TimesheetPolicyResponseDto":{"type":"object","properties":{"data":{"description":"Timesheet policy data","allOf":[{"$ref":"#/components/schemas/TimesheetPolicyDto"}]}},"required":["data"]},"LeaveRequestListResponseDto":{"type":"object","properties":{"data":{"description":"Array of leave requests","items":{"type":"array"},"type":"array"},"page":{"type":"number","description":"Current page number","example":1},"pageSize":{"type":"number","description":"Page size","example":20},"total":{"type":"number","description":"Total number of leave requests","example":42}},"required":["data","page","pageSize","total"]},"LeaveRequestDto":{"type":"object","properties":{"id":{"type":"string","description":"Leave request ID","example":"123e4567-e89b-12d3-a456-426614174040"},"tenantId":{"type":"string","description":"Tenant ID","example":"123e4567-e89b-12d3-a456-426614174000"},"userId":{"type":"string","description":"User ID","example":"123e4567-e89b-12d3-a456-426614174001"},"benefitTypeId":{"type":"string","description":"Benefit type ID","example":"123e4567-e89b-12d3-a456-426614174030"},"startDate":{"type":"string","description":"Leave start date","example":"2025-02-01"},"endDate":{"type":"string","description":"Leave end date","example":"2025-02-05"},"amount":{"type":"number","description":"Amount of benefit used","example":5},"status":{"type":"string","description":"Request status","example":"pending","enum":["pending","approved","rejected","cancelled"]},"approverUserId":{"type":"object","description":"Approver user ID","example":"123e4567-e89b-12d3-a456-426614174050","nullable":true},"approvedAt":{"type":"object","description":"Approval timestamp","example":"2025-01-25T10:00:00.000Z","nullable":true},"note":{"type":"object","description":"Note","example":"Family vacation","nullable":true},"createdAt":{"type":"string","description":"Creation timestamp","example":"2025-01-20T09:00:00.000Z"}},"required":["id","tenantId","userId","benefitTypeId","startDate","endDate","amount","status","approverUserId","approvedAt","note","createdAt"]},"LeaveRequestResponseDto":{"type":"object","properties":{"data":{"description":"Leave request data","allOf":[{"$ref":"#/components/schemas/LeaveRequestDto"}]}},"required":["data"]},"CreateLeaveRequestRequestDto":{"type":"object","properties":{"benefitTypeId":{"type":"string","description":"Benefit type ID","example":"123e4567-e89b-12d3-a456-426614174030"},"startDate":{"type":"string","description":"Leave start date (YYYY-MM-DD)","example":"2025-02-01"},"endDate":{"type":"string","description":"Leave end date (YYYY-MM-DD)","example":"2025-02-05"},"amount":{"type":"number","description":"Amount of benefit to use (days or hours)","example":5},"note":{"type":"object","description":"Optional note","example":"Family vacation","nullable":true}},"required":["benefitTypeId","startDate","endDate","amount"]},"LeaveRequestMetaDto":{"type":"object","properties":{"userId":{"type":"string","description":"User ID","example":"123e4567-e89b-12d3-a456-426614174001"},"count":{"type":"number","description":"Count of results","example":5}},"required":["userId","count"]},"BenefitBalancesResponseDto":{"type":"object","properties":{"data":{"description":"Array of benefit balances","items":{"type":"array"},"type":"array"},"meta":{"description":"Metadata","allOf":[{"$ref":"#/components/schemas/LeaveRequestMetaDto"}]}},"required":["data","meta"]},"CalendarMetaDto":{"type":"object","properties":{"userId":{"type":"string","description":"User ID for this calendar","example":"123e4567-e89b-12d3-a456-426614174001"},"from":{"type":"string","description":"Start date filter","example":"2025-01-01"},"to":{"type":"string","description":"End date filter","example":"2025-12-31"},"include":{"description":"Included item types","example":["holidays","leave","timesheets"],"type":"array","items":{"type":"string"}}},"required":["userId","from","to","include"]},"CalendarResponseDto":{"type":"object","properties":{"data":{"description":"Array of calendar items (holidays, leave requests, timesheets)","type":"array","items":{"type":"array"}},"meta":{"description":"Calendar metadata","allOf":[{"$ref":"#/components/schemas/CalendarMetaDto"}]}},"required":["data","meta"]},"UserListResponseDto":{"type":"object","properties":{"data":{"description":"Array of employees","items":{"type":"array"},"type":"array"},"meta":{"description":"Pagination metadata","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["data","meta"]},"ProfileDto":{"type":"object","properties":{"jobTitle":{"type":"object","description":"Job title","example":"Software Engineer","nullable":true},"startDate":{"type":"object","description":"Employment start date","example":"2025-01-01","nullable":true},"managerUserId":{"type":"object","description":"Manager user ID","example":"123e4567-e89b-12d3-a456-426614174002","nullable":true},"location":{"type":"object","description":"Work location","example":"New York, NY","nullable":true},"phone":{"type":"object","description":"Phone number","example":"+1-555-0123","nullable":true}},"required":["jobTitle","startDate","managerUserId","location","phone"]},"EmployeeDto":{"type":"object","properties":{"id":{"type":"string","description":"User ID","example":"123e4567-e89b-12d3-a456-426614174001"},"email":{"type":"string","description":"User email address","example":"john.doe@example.com"},"name":{"type":"object","description":"User full name","example":"John Doe","nullable":true},"locale":{"type":"object","description":"User locale/language preference","example":"en","nullable":true},"createdAt":{"type":"string","description":"User creation timestamp","example":"2025-01-15T10:00:00.000Z"},"lastLoginAt":{"type":"object","description":"Last login timestamp","example":"2025-01-20T14:30:00.000Z","nullable":true},"membership":{"description":"Membership information","allOf":[{"$ref":"#/components/schemas/MembershipDto"}]},"profile":{"description":"Profile information","nullable":true,"allOf":[{"$ref":"#/components/schemas/ProfileDto"}]}},"required":["id","email","name","locale","createdAt","lastLoginAt","membership","profile"]},"UserResponseDto":{"type":"object","properties":{"data":{"description":"Employee data","allOf":[{"$ref":"#/components/schemas/EmployeeDto"}]}},"required":["data"]},"OrganizationDto":{"type":"object","properties":{"id":{"type":"string","description":"Organization ID","example":"123e4567-e89b-12d3-a456-426614174000"},"name":{"type":"string","description":"Organization name","example":"Acme Corporation"},"slug":{"type":"string","description":"Organization slug (URL-friendly identifier)","example":"acme-corp"},"phone":{"type":"object","description":"Organization phone number","example":"+1-555-123-4567","nullable":true},"address":{"type":"object","description":"Organization address","example":"123 Main Street, Suite 100, San Francisco, CA 94105","nullable":true},"logoUrl":{"type":"object","description":"Organization logo URL","example":"https://cdn.example.com/logos/acme-corp.png","nullable":true},"timezone":{"type":"string","description":"Organization timezone (IANA timezone string)","example":"America/New_York"},"country":{"type":"object","description":"Organization country (ISO 3166-1 alpha-2 code)","example":"US","nullable":true},"createdAt":{"type":"string","description":"Organization creation timestamp","example":"2024-01-15T10:30:00Z"}},"required":["id","name","slug","phone","address","logoUrl","timezone","country","createdAt"]},"OrganizationResponseDto":{"type":"object","properties":{"data":{"description":"Organization data","allOf":[{"$ref":"#/components/schemas/OrganizationDto"}]}},"required":["data"]},"UpdateOrganizationRequestDto":{"type":"object","properties":{"name":{"type":"string","description":"Organization name","example":"Acme Corporation"},"phone":{"type":"object","description":"Organization phone number","example":"+1-555-123-4567","nullable":true},"address":{"type":"object","description":"Organization address","example":"123 Main Street, Suite 100, San Francisco, CA 94105","nullable":true},"logoUrl":{"type":"object","description":"Organization logo URL (CDN or storage URL)","example":"https://cdn.example.com/logos/acme-corp.png","nullable":true},"timezone":{"type":"string","description":"Organization timezone (IANA timezone string)","example":"America/New_York"},"country":{"type":"object","description":"Organization country (ISO 3166-1 alpha-2 code)","example":"US","nullable":true}}}}}}